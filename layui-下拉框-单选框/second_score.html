<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>中级组评分页</title>
  <link rel="stylesheet" href="./layui/css/layui.css">
  <script src="./layui/layui.js"></script>
  <script src="./js/jquery-3.5.1.min.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 999;
      width: 100%;
      background: #1e9fff;
    }

    .container {
      width: 85%;
      margin: 60px auto 10px;
    }

    .container .layui-card-header {
      font-size: 22px;
    }

    .lablecard {

      /* border: 1px solid red; */
      margin: 10px;
      padding-left: 25px;
      display: flex;
      justify-content: left;
      align-items: center;
      flex-direction: row;
    }

    .row {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -ms-flex-wrap: wrap;
      flex-wrap: wrap;
      /* border: 1px solid red; */
    }

    .card {
      margin: 20px 40px;
    }

    /* 卡片阴影效果，白白的，有悬浮感 */
    .classCard {
      position: relative;
      background: #ffffff;
      border-radius: 3px;
      padding: 20px;
      margin: 15px 0;
      border-radius: 10px;
      -webkit-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
        0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
      box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
        0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
      -webkit-transition: all 0.3s ease-in-out;
      -o-transition: all 0.3s ease-in-out;
      transition: all 0.3s ease-in-out;
    }

    .layui-form-radio div,
    .layui-form-radio i {
      font-size: 30px;
    }

    .btn {
      margin: 10px auto;
      width: 85%;
      text-align: right;
    }

    .btn-class {
      font-size: 20px;
      width: 100px;
      height: 50px;
    }

    .layui-form-label {
      font-size: 18px;
    }

    .layui-input-inline {
      font-size: 20px;
    }

    .layui-form-select dl {
      max-height: 200px;
    }
  </style>

</head>

<body>
  <form id="formData" class="layui-form">
    <header>
      <div class="lablecard">
        <i class="layui-icon layui-icon-add-1" style="font-size: 30px; color: #1328e0"></i>
        <label class="layui-form-label" style="width: 100px; margin-left: 15px">队伍:</label>
        <div class="layui-input-inline">
          <select lay-filter="team" name="teamId" id="team">

          </select>
        </div>
        <label class="layui-form-label" style="width: 170px;  margin-left: 15px">时间/秒:</label>
        <div class="layui-input-inline">
          <select lay-filter="time" name="time" id="time">
            <option value="1">1</option>
          </select>
        </div>
        <label class="layui-form-label" style="width: 100px;  margin-left: 40px">总分:</label>
        <div class="layui-input-inline" style="text-align: left">
          <span id="totalScore">0</span>
        </div>
      </div>
    </header>
    <section class="container">
      <div style="padding: 20px; background-color: #F2F2F2;">
        <div class="layui-row layui-col-space15">
          <div class="layui-col-md12 classCard">
            <div class="layui-card">
              <div class="layui-card-header">第一层物料桶个数</div>
              <div class="layui-card-body">
                <div class="layui-input-inline">
                  <select lay-filter="select_first" name="first" id="first">
                    <option value="0">0个</option>
                    <option value="10">1个</option>
                    <option value="20">2个</option>
                    <option value="30">3个</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-col-md12 classCard">
            <div class="layui-card">
              <div class="layui-card-header">第二层物料桶个数</div>
              <div class="layui-card-body">
                <div class="layui-input-inline">
                  <select lay-filter="select_second" name="second" id="second">
                    <option value="0">0个</option>
                    <option value="20">1个</option>
                    <option value="40">2个</option>
                    <option value="60">3个</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-col-md12 classCard">
            <div class="layui-card">
              <div class="layui-card-header">第三层物料桶个数</div>
              <div class="layui-card-body">
                <div class="layui-input-inline">
                  <select lay-filter="select_third" name="third" id="third">
                    <option value="0">0个</option>
                    <option value="30">1个</option>
                    <option value="60">2个</option>
                    <option value="90">3个</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-col-md12 classCard">
            <div class="layui-card">
              <div class="layui-card-header">手触物料桶次数</div>
              <div class="layui-card-body">
                <div class="layui-input-inline">
                  <select lay-filter="hand_fall_score" name="handFallScore" id="hand_fall_score">
                    <option value="0">0次</option>
                    <option value="-20">1次</option>
                    <option value="-40">2次</option>
                    <option value="-60">3次</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-col-md12 classCard">
            <div class="layui-card">
              <div class="layui-card-header">物料桶落在指定区域范围之外</div>
              <div class="layui-card-body">
                <div class="layui-input-inline">
                  <select lay-filter="out_fall_score" name="outFallScore" id="out_fall_score">
                    <option value="0">0个</option>
                    <option value="-20">1个</option>
                    <option value="-40">2个</option>
                    <option value="-60">3个</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-col-md12 classCard">
            <div class="layui-card">
              <div class="layui-card-header">是否手叠物料桶或致损物料桶</div>
              <div class="layui-card-body">
                <div class="layui-input-inline">
                  <select lay-filter="select_foul" name="foul" id="foul">
                    <option value="1">是</option>
                    <option value="0" selected>否</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

        </div>
    </section>
    </div>
    <div class="layui-form-item btn">
      <div class="layui-input-block">
        <button class="layui-btn btn-class" lay-submit lay-filter="formDemo" onclick="submitData()">提交</button>
      </div>
    </div>
  </form>
</body>

<script>
  layui.use("form", function () {
    var form = layui.form;
    form.on('select(select_first)', function (data) {
      console.log(data.value);
      setTotalScore();
    });
    form.on('select(select_second)', function (data) {
      console.log(data.value);
      setTotalScore();
    });
    form.on('select(select_third)', function (data) {
      console.log(data.value);
      setTotalScore();
    });
    form.on('select(hand_fall_score)', function (data) {
      console.log(data.value);
      setTotalScore();
    });
    form.on('select(out_fall_score)', function (data) {
      console.log(data.value);
      setTotalScore();
    });
    form.on('select(select_foul)', function (data) {
      console.log(data.value);
      setTotalScore();
    });
  });

  function setTotalScore() {
    var totalScore;
    var foul = $("#foul option:selected").val();
    if (foul == 1) {
      totalScore = 0;
    } else {
      var first = parseInt($("#first option:selected").val());
      var second = parseInt($("#second option:selected").val());
      var third = parseInt($("#third option:selected").val());
      var hand_fall_score = parseInt($("#hand_fall_score option:selected").val());
      var out_fall_score = parseInt($("#out_fall_score option:selected").val());

      totalScore = first + second + third + hand_fall_score + out_fall_score;
    }
    console.log("tatalScore = " + totalScore)
    $("#totalScore").html(totalScore);
  }

  function submitData() {
    $.post("/secondScore/addSecondaryScore", $("#formData").serialize(), function (result) {
      console.log(result.data)
    })
  }
</script>

</html>